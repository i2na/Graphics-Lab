[프로젝트 개요]

이 프로젝트는 WebGPU를 활용하여 탱크 모델을 로딩하고, 카메라 조작과 포탄 발사를 구현한 프로젝트입니다.
사용자는 마우스와 키보드를 통해 탱크 상태(터렛, 배럴 등)를 조작할 수 있으며,
PBR 셰이더를 이용해 노멀맵, 메탈/러프니스/AO 텍스처를 적용하여 실감나는 렌더링을 시도합니다.

[사용 방법]

로컬 서버(또는 웹 서버)를 통해 프로젝트를 실행한 뒤, 브라우저에서 /index.html을 엽니다.
마우스 드래그로 카메라를 회전(왼쪽 버튼)하거나 이동(왼쪽 버튼 + Ctrl/Meta 키), 휠로 줌 인/아웃을 수행합니다.
키보드 화살표로 탱크를 전후좌우 이동/회전, A/D(한글 자판 시 ㅁ/ㅇ)로 터렛 회전, W/S(한글 자판 시 ㅈ/ㄴ)로 배럴 각도를 조절합니다.
스페이스바를 누르면 포탄을 발사하며, 포탄은 중력에 따라 낙하합니다.
P 키를 누르면 포탄 낙하가 일시정지/재개됩니다.

[주요 기능]

1. GLTF/OBJ 로딩

loader.js에서 ThreeJS 로더(GLTFLoader, OBJLoader)를 사용하여 메시 정보(positions, normals, uvs, indices 등)를 파싱합니다.
각 배열(positions, normals 등)을 WebGPU 버퍼로 생성해 렌더링에 활용합니다.

2. PBR 렌더링

vertexShaderWGSL, fragmentShaderWGSL 파일에서 WGSL로 작성된 셰이더를 사용합니다.
노멀맵, 러프니스/메탈릭/AO 텍스처를 샘플링하여, 물리 기반 조명(PBR) 계산을 수행합니다.

3. UI & 카메라 조작

ui.js에서 마우스 및 휠 이벤트를 감지하고, 해당 이벤트를 통해 카메라 행렬(회전, 이동, 줌)을 업데이트합니다.
키보드를 통해 탱크 이동(화살표), 터렛 및 배럴 회전(A/D, W/S) 등의 기능을 제공합니다.

4. 포탄 발사 및 일시정지

main.js에서 spawnShell 함수를 통해 포탄을 생성하고, updateAllShells에서 중력 연산을 적용해 매 프레임마다 위치를 갱신합니다.
P 키를 누르면 shellPaused 상태를 토글하여 포탄의 움직임(중력 적용)을 일시정지/재개합니다.

5. 배럴 피벗 계산

computeBarrelPivot 함수를 통해 탱크 바디, 터렛, 배럴(조인트) 행렬을 순차적으로 곱한 뒤, 배럴 끝의 월드 좌표를 얻습니다.
이를 통해 스페이스바로 발사하는 포탄이 배럴 끝 지점에서 출발하도록 구현합니다.

[핵심 구현 방법]

WebGPU 초기화
- main.js에서 requestAdapter, requestDevice로 GPU Device를 얻고, Canvas Context를 구성합니다.

파이프라인 및 BindGroup
- pipelines.js에서 정점/프래그먼트 모듈, 레이아웃, 버퍼 바인딩을 설정하고, Uniform/Texture를 묶어 BindGroup을 생성합니다.

이벤트 핸들링
- UI 클래스에서 onmousedown, onmousemove 등을 통해 카메라 행렬을 갱신하고, window keydown 이벤트로 탱크와 포탄을 제어합니다.

셰이더 로직
- 노멀맵 해석, 메탈릭/러프니스, 환경광(AO) 등에 기반한 물리 기반 광원 모델을 적용합니다.
